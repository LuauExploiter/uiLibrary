local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")

local UILibrary = {}
UILibrary.__index = UILibrary

-- [ Configuration & Styling ] --
local Theme = {
    Background = Color3.fromRGB(13, 13, 15),
    Secondary = Color3.fromRGB(20, 20, 23),
    Accent = Color3.fromRGB(0, 125, 255),
    Text = Color3.fromRGB(255, 255, 255),
    SubText = Color3.fromRGB(160, 160, 170),
    Border = Color3.fromRGB(40, 40, 45),
    Hover = Color3.fromRGB(30, 30, 35),
    Selected = Color3.fromRGB(0, 125, 255),
    Danger = Color3.fromRGB(255, 60, 60),
    Success = Color3.fromRGB(60, 255, 120),
    Font = Enum.Font.GothamMedium,
    FontBold = Enum.Font.GothamBold,
    CornerRadius = UDim.new(0, 10),
    Padding = 12
}

-- [ Utility Functions ] --
local function Tween(obj, props, duration)
    local tween = TweenService:Create(obj, TweenInfo.new(duration or 0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), props)
    tween:Play()
    return tween
end

local function CreateIcon(id, parent, size)
    local icon = Instance.new("ImageLabel")
    icon.Name = "Icon"
    icon.Size = size or UDim2.new(0, 18, 0, 18)
    icon.BackgroundTransparency = 1
    icon.Image = id
    icon.ImageColor3 = Theme.Text
    icon.Parent = parent
    return icon
end

-- [ Notification System ] --
local Notifications = { List = {} }
function Notifications:Init(gui)
    self.Container = Instance.new("Frame")
    self.Container.Name = "Notifications"
    self.Container.Size = UDim2.new(0, 300, 1, -20)
    self.Container.Position = UDim2.new(1, -310, 0, 10)
    self.Container.BackgroundTransparency = 1
    self.Container.Parent = gui
    
    local layout = Instance.new("UIListLayout")
    layout.VerticalAlignment = Enum.VerticalAlignment.Bottom
    layout.Padding = UDim.new(0, 10)
    layout.Parent = self.Container
end

function Notifications:New(title, desc, type, duration)
    local notif = Instance.new("Frame")
    notif.Size = UDim2.new(1, 0, 0, 0)
    notif.BackgroundColor3 = Theme.Secondary
    notif.ClipsDescendants = true
    notif.Parent = self.Container
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = Theme.CornerRadius
    corner.Parent = notif
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = Theme.Border
    stroke.Transparency = 0.5
    stroke.Parent = notif
    
    local accent = Instance.new("Frame")
    accent.Size = UDim2.new(0, 4, 1, 0)
    accent.BackgroundColor3 = type == "Error" and Theme.Danger or type == "Success" and Theme.Success or Theme.Accent
    accent.BorderSizePixel = 0
    accent.Parent = notif
    
    local content = Instance.new("Frame")
    content.Size = UDim2.new(1, -15, 1, 0)
    content.Position = UDim2.new(0, 15, 0, 0)
    content.BackgroundTransparency = 1
    content.Parent = notif
    
    local tLabel = Instance.new("TextLabel")
    tLabel.Size = UDim2.new(1, 0, 0, 25)
    tLabel.Position = UDim2.new(0, 0, 0, 5)
    tLabel.Text = title
    tLabel.TextColor3 = Theme.Text
    tLabel.TextSize = 14
    tLabel.Font = Theme.FontBold
    tLabel.TextXAlignment = Enum.TextXAlignment.Left
    tLabel.BackgroundTransparency = 1
    tLabel.Parent = content
    
    local dLabel = Instance.new("TextLabel")
    dLabel.Size = UDim2.new(1, -10, 0, 0)
    dLabel.Position = UDim2.new(0, 0, 0, 25)
    dLabel.Text = desc
    dLabel.TextColor3 = Theme.SubText
    dLabel.TextSize = 12
    dLabel.Font = Theme.Font
    dLabel.TextXAlignment = Enum.TextXAlignment.Left
    dLabel.TextYAlignment = Enum.TextYAlignment.Top
    dLabel.TextWrapped = true
    dLabel.BackgroundTransparency = 1
    dLabel.Parent = content
    
    local height = math.clamp(dLabel.TextBounds.Y + 40, 60, 150)
    Tween(notif, {Size = UDim2.new(1, 0, 0, height)})
    
    task.delay(duration or 5, function()
        Tween(notif, {Size = UDim2.new(1, 0, 0, 0), BackgroundTransparency = 1}, 0.5)
        task.wait(0.5)
        notif:Destroy()
    end)
end

-- [ Main Library ] --
function UILibrary:Create(title)
    local self = setmetatable({}, UILibrary)
    
    self.Gui = Instance.new("ScreenGui")
    self.Gui.Name = "Hiklo_Premium_UI"
    self.Gui.ResetOnSpawn = false
    self.Gui.ZIndexBehavior = Enum.ZIndexBehavior.Global
    self.Gui.Parent = CoreGui
    
    Notifications:Init(self.Gui)
    
    -- Main Window
    self.Main = Instance.new("Frame")
    self.Main.Size = UDim2.new(0, 550, 0, 400)
    self.Main.Position = UDim2.new(0.5, -275, 0.5, -200)
    self.Main.BackgroundColor3 = Theme.Background
    self.Main.BorderSizePixel = 0
    self.Main.ClipsDescendants = true
    self.Main.Parent = self.Gui
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = Theme.CornerRadius
    mainCorner.Parent = self.Main
    
    local mainStroke = Instance.new("UIStroke")
    mainStroke.Color = Theme.Border
    mainStroke.Thickness = 1.5
    mainStroke.Parent = self.Main
    
    -- Sidebar
    self.Sidebar = Instance.new("Frame")
    self.Sidebar.Size = UDim2.new(0, 160, 1, -50)
    self.Sidebar.Position = UDim2.new(0, 0, 0, 50)
    self.Sidebar.BackgroundColor3 = Theme.Secondary
    self.Sidebar.BorderSizePixel = 0
    self.Sidebar.Parent = self.Main
    
    local sidebarLine = Instance.new("Frame")
    sidebarLine.Size = UDim2.new(0, 1, 1, 0)
    sidebarLine.Position = UDim2.new(1, 0, 0, 0)
    sidebarLine.BackgroundColor3 = Theme.Border
    sidebarLine.BorderSizePixel = 0
    sidebarLine.Parent = self.Sidebar
    
    self.TabContainer = Instance.new("ScrollingFrame")
    self.TabContainer.Size = UDim2.new(1, -10, 1, -10)
    self.TabContainer.Position = UDim2.new(0, 5, 0, 5)
    self.TabContainer.BackgroundTransparency = 1
    self.TabContainer.BorderSizePixel = 0
    self.TabContainer.ScrollBarThickness = 0
    self.TabContainer.AutomaticCanvasSize = Enum.AutomaticSize.Y
    self.TabContainer.Parent = self.Sidebar
    
    local tabLayout = Instance.new("UIListLayout")
    tabLayout.Padding = UDim.new(0, 5)
    tabLayout.Parent = self.TabContainer
    
    -- Topbar
    self.Topbar = Instance.new("Frame")
    self.Topbar.Size = UDim2.new(1, 0, 0, 50)
    self.Topbar.BackgroundColor3 = Theme.Secondary
    self.Topbar.BorderSizePixel = 0
    self.Topbar.Parent = self.Main
    
    local topbarLine = Instance.new("Frame")
    topbarLine.Size = UDim2.new(1, 0, 0, 1)
    topbarLine.Position = UDim2.new(0, 0, 1, 0)
    topbarLine.BackgroundColor3 = Theme.Border
    topbarLine.BorderSizePixel = 0
    topbarLine.Parent = self.Topbar
    
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, -100, 1, 0)
    titleLabel.Position = UDim2.new(0, 20, 0, 0)
    titleLabel.Text = title
    titleLabel.TextColor3 = Theme.Text
    titleLabel.TextSize = 18
    titleLabel.Font = Theme.FontBold
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.BackgroundTransparency = 1
    titleLabel.Parent = self.Topbar
    
    -- Content Area
    self.Content = Instance.new("Frame")
    self.Content.Size = UDim2.new(1, -160, 1, -50)
    self.Content.Position = UDim2.new(0, 160, 0, 50)
    self.Content.BackgroundTransparency = 1
    self.Content.Parent = self.Main
    
    self.Tabs = {}
    self.CurrentTab = nil
    
    -- Dragging Logic
    local dragging, dragInput, dragStart, startPos
    self.Topbar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = self.Main.Position
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            self.Main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)
    
    return self
end

function UILibrary:Tab(name, iconId)
    local tab = { Elements = {} }
    
    local tabBtn = Instance.new("TextButton")
    tabBtn.Size = UDim2.new(1, 0, 0, 35)
    tabBtn.BackgroundColor3 = Theme.Secondary
    tabBtn.BackgroundTransparency = 1
    tabBtn.Text = ""
    tabBtn.AutoButtonColor = false
    tabBtn.Parent = self.TabContainer
    
    local tabCorner = Instance.new("UICorner")
    tabCorner.CornerRadius = UDim.new(0, 6)
    tabCorner.Parent = tabBtn
    
    local tabLabel = Instance.new("TextLabel")
    tabLabel.Size = UDim2.new(1, -40, 1, 0)
    tabLabel.Position = UDim2.new(0, 35, 0, 0)
    tabLabel.Text = name
    tabLabel.TextColor3 = Theme.SubText
    tabLabel.TextSize = 14
    tabLabel.Font = Theme.Font
    tabLabel.TextXAlignment = Enum.TextXAlignment.Left
    tabLabel.BackgroundTransparency = 1
    tabLabel.Parent = tabBtn
    
    if iconId then
        local icon = CreateIcon(iconId, tabBtn)
        icon.Position = UDim2.new(0, 10, 0.5, -9)
        icon.ImageColor3 = Theme.SubText
    end
    
    local scroll = Instance.new("ScrollingFrame")
    scroll.Size = UDim2.new(1, 0, 1, 0)
    scroll.BackgroundTransparency = 1
    scroll.BorderSizePixel = 0
    scroll.ScrollBarThickness = 4
    scroll.ScrollBarImageColor3 = Theme.Accent
    scroll.Visible = false
    scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
    scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
    scroll.Parent = self.Content
    
    local layout = Instance.new("UIListLayout")
    layout.Padding = UDim.new(0, 8)
    layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    layout.Parent = scroll
    
    local padding = Instance.new("UIPadding")
    padding.PaddingTop = UDim.new(0, 15)
    padding.PaddingBottom = UDim.new(0, 15)
    padding.PaddingLeft = UDim.new(0, 15)
    padding.PaddingRight = UDim.new(0, 15)
    padding.Parent = scroll
    
    -- Auto-adjusting logic for traits/large lists
    layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        scroll.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 30)
    end)
    
    local function Select()
        if self.CurrentTab then
            self.CurrentTab.Btn.BackgroundTransparency = 1
            self.CurrentTab.Label.TextColor3 = Theme.SubText
            self.CurrentTab.Scroll.Visible = false
            if self.CurrentTab.Btn:FindFirstChild("Icon") then
                self.CurrentTab.Btn.Icon.ImageColor3 = Theme.SubText
            end
        end
        
        tabBtn.BackgroundTransparency = 0
        tabBtn.BackgroundColor3 = Theme.Accent
        tabLabel.TextColor3 = Theme.Text
        scroll.Visible = true
        if tabBtn:FindFirstChild("Icon") then
            tabBtn.Icon.ImageColor3 = Theme.Text
        end
        
        self.CurrentTab = { Btn = tabBtn, Label = tabLabel, Scroll = scroll }
    end
    
    tabBtn.MouseButton1Click:Connect(Select)
    if not self.CurrentTab then Select() end
    
    -- [ Element Creators ] --
    
    function tab:AddButton(text, callback, iconId)
        local btnFrame = Instance.new("TextButton")
        btnFrame.Size = UDim2.new(1, 0, 0, 40)
        btnFrame.BackgroundColor3 = Theme.Secondary
        btnFrame.Text = ""
        btnFrame.AutoButtonColor = false
        btnFrame.Parent = scroll
        
        local corner = Instance.new("UICorner")
        corner.CornerRadius = Theme.CornerRadius
        corner.Parent = btnFrame
        
        local stroke = Instance.new("UIStroke")
        stroke.Color = Theme.Border
        stroke.Parent = btnFrame
        
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, -20, 1, 0)
        label.Position = UDim2.new(0, iconId and 35 or 10, 0, 0)
        label.Text = text
        label.TextColor3 = Theme.Text
        label.TextSize = 14
        label.Font = Theme.Font
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.BackgroundTransparency = 1
        label.Parent = btnFrame
        
        if iconId then
            local icon = CreateIcon(iconId, btnFrame)
            icon.Position = UDim2.new(0, 10, 0.5, -9)
        end
        
        btnFrame.MouseEnter:Connect(function() Tween(btnFrame, {BackgroundColor3 = Theme.Hover}) end)
        btnFrame.MouseLeave:Connect(function() Tween(btnFrame, {BackgroundColor3 = Theme.Secondary}) end)
        btnFrame.MouseButton1Click:Connect(function()
            Tween(btnFrame, {BackgroundColor3 = Theme.Accent}, 0.1)
            task.wait(0.1)
            Tween(btnFrame, {BackgroundColor3 = Theme.Hover}, 0.1)
            callback()
        end)
    end
    
    function tab:AddToggle(text, default, callback, iconId)
        local toggleFrame = Instance.new("Frame")
        toggleFrame.Size = UDim2.new(1, 0, 0, 40)
        toggleFrame.BackgroundColor3 = Theme.Secondary
        toggleFrame.Parent = scroll
        
        local corner = Instance.new("UICorner")
        corner.CornerRadius = Theme.CornerRadius
        corner.Parent = toggleFrame
        
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, -60, 1, 0)
        label.Position = UDim2.new(0, iconId and 35 or 10, 0, 0)
        label.Text = text
        label.TextColor3 = Theme.Text
        label.TextSize = 14
        label.Font = Theme.Font
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.BackgroundTransparency = 1
        label.Parent = toggleFrame
        
        if iconId then
            local icon = CreateIcon(iconId, toggleFrame)
            icon.Position = UDim2.new(0, 10, 0.5, -9)
        end
        
        local box = Instance.new("Frame")
        box.Size = UDim2.new(0, 34, 0, 18)
        box.Position = UDim2.new(1, -44, 0.5, -9)
        box.BackgroundColor3 = default and Theme.Accent or Theme.Border
        box.Parent = toggleFrame
        
        local boxCorner = Instance.new("UICorner")
        boxCorner.CornerRadius = UDim.new(1, 0)
        boxCorner.Parent = box
        
        local dot = Instance.new("Frame")
        dot.Size = UDim2.new(0, 14, 0, 14)
        dot.Position = default and UDim2.new(1, -16, 0.5, -7) or UDim2.new(0, 2, 0.5, -7)
        dot.BackgroundColor3 = Theme.Text
        dot.Parent = box
        
        local dotCorner = Instance.new("UICorner")
        dotCorner.CornerRadius = UDim.new(1, 0)
        dotCorner.Parent = dot
        
        local enabled = default
        local function Toggle()
            enabled = not enabled
            Tween(box, {BackgroundColor3 = enabled and Theme.Accent or Theme.Border})
            Tween(dot, {Position = enabled and UDim2.new(1, -16, 0.5, -7) or UDim2.new(0, 2, 0.5, -7)})
            callback(enabled)
        end
        
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1, 0, 1, 0)
        btn.BackgroundTransparency = 1
        btn.Text = ""
        btn.Parent = toggleFrame
        btn.MouseButton1Click:Connect(Toggle)
        
        return { Set = function(v) if enabled ~= v then Toggle() end end }
    end
    
    function tab:AddDropdown(text, options, callback, multiSelect, iconId)
        local dropdown = { Selected = multiSelect and {} or nil, Open = false }
        
        local frame = Instance.new("Frame")
        frame.Size = UDim2.new(1, 0, 0, 40)
        frame.BackgroundColor3 = Theme.Secondary
        frame.ClipsDescendants = true
        frame.Parent = scroll
        
        local corner = Theme.CornerRadius:Clone()
        corner.Parent = frame
        
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, -50, 0, 40)
        label.Position = UDim2.new(0, iconId and 35 or 10, 0, 0)
        label.Text = text
        label.TextColor3 = Theme.Text
        label.TextSize = 14
        label.Font = Theme.Font
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.BackgroundTransparency = 1
        label.Parent = frame
        
        if iconId then
            local icon = CreateIcon(iconId, frame)
            icon.Position = UDim2.new(0, 10, 0, 11)
        end
        
        local arrow = CreateIcon("rbxassetid://6034818372", frame, UDim2.new(0, 16, 0, 16))
        arrow.Position = UDim2.new(1, -30, 0, 12)
        arrow.ImageColor3 = Theme.SubText
        
        local container = Instance.new("Frame")
        container.Size = UDim2.new(1, -20, 0, 0)
        container.Position = UDim2.new(0, 10, 0, 45)
        container.BackgroundTransparency = 1
        container.Parent = frame
        
        local cLayout = Instance.new("UIListLayout")
        cLayout.Padding = UDim.new(0, 5)
        cLayout.Parent = container
        
        local function UpdateLabel()
            if multiSelect then
                if #dropdown.Selected == 0 then
                    label.Text = text
                else
                    label.Text = text .. ": " .. table.concat(dropdown.Selected, ", ")
                end
            else
                label.Text = text .. ": " .. (dropdown.Selected or "None")
            end
        end
        
        local optionBtns = {}
        for _, opt in ipairs(options) do
            local optName = type(opt) == "table" and opt.Name or opt
            local optIcon = type(opt) == "table" and opt.Icon or nil
            
            local optBtn = Instance.new("TextButton")
            optBtn.Size = UDim2.new(1, 0, 0, 30)
            optBtn.BackgroundColor3 = Theme.Background
            optBtn.Text = ""
            optBtn.AutoButtonColor = false
            optBtn.Parent = container
            
            local oCorner = Instance.new("UICorner")
            oCorner.CornerRadius = UDim.new(0, 6)
            oCorner.Parent = optBtn
            
            local oLabel = Instance.new("TextLabel")
            oLabel.Size = UDim2.new(1, -10, 1, 0)
            oLabel.Position = UDim2.new(0, optIcon and 30 or 10, 0, 0)
            oLabel.Text = optName
            oLabel.TextColor3 = Theme.SubText
            oLabel.TextSize = 13
            oLabel.Font = Theme.Font
            oLabel.TextXAlignment = Enum.TextXAlignment.Left
            oLabel.BackgroundTransparency = 1
            oLabel.Parent = optBtn
            
            if optIcon then
                local icon = CreateIcon(optIcon, optBtn, UDim2.new(0, 16, 0, 16))
                icon.Position = UDim2.new(0, 8, 0.5, -8)
                icon.ImageColor3 = Theme.SubText
            end
            
            optBtn.MouseButton1Click:Connect(function()
                if multiSelect then
                    local idx = table.find(dropdown.Selected, optName)
                    if idx then
                        table.remove(dropdown.Selected, idx)
                        Tween(optBtn, {BackgroundColor3 = Theme.Background})
                        oLabel.TextColor3 = Theme.SubText
                    else
                        table.insert(dropdown.Selected, optName)
                        Tween(optBtn, {BackgroundColor3 = Theme.Accent})
                        oLabel.TextColor3 = Theme.Text
                    end
                    callback(dropdown.Selected)
                else
                    dropdown.Selected = optName
                    for _, b in pairs(optionBtns) do 
                        Tween(b.Btn, {BackgroundColor3 = Theme.Background})
                        b.Label.TextColor3 = Theme.SubText
                    end
                    Tween(optBtn, {BackgroundColor3 = Theme.Accent})
                    oLabel.TextColor3 = Theme.Text
                    callback(optName)
                    
                    -- Close dropdown
                    dropdown.Open = false
                    Tween(frame, {Size = UDim2.new(1, 0, 0, 40)})
                    Tween(arrow, {Rotation = 0})
                end
                UpdateLabel()
            end)
            table.insert(optionBtns, {Btn = optBtn, Label = oLabel, Name = optName})
        end
        
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1, 0, 0, 40)
        btn.BackgroundTransparency = 1
        btn.Text = ""
        btn.Parent = frame
        
        btn.MouseButton1Click:Connect(function()
            dropdown.Open = not dropdown.Open
            local targetHeight = dropdown.Open and (cLayout.AbsoluteContentSize.Y + 55) or 40
            Tween(frame, {Size = UDim2.new(1, 0, 0, targetHeight)})
            Tween(arrow, {Rotation = dropdown.Open and 180 or 0})
            
            -- Dynamic scrolling frame extension
            if dropdown.Open then
                local bottom = frame.Position.Y.Offset + targetHeight
                if bottom > scroll.CanvasSize.Y.Offset then
                    scroll.CanvasSize = UDim2.new(0, 0, 0, bottom + 20)
                end
            end
        end)
        
        return {
            Set = function(val)
                dropdown.Selected = val
                UpdateLabel()
                for _, b in pairs(optionBtns) do
                    local isSel = multiSelect and table.find(val, b.Name) or (val == b.Name)
                    b.Btn.BackgroundColor3 = isSel and Theme.Accent or Theme.Background
                    b.Label.TextColor3 = isSel and Theme.Text or Theme.SubText
                end
            end
        }
    end
    
    function tab:AddTextbox(text, placeholder, callback, iconId)
        local frame = Instance.new("Frame")
        frame.Size = UDim2.new(1, 0, 0, 40)
        frame.BackgroundColor3 = Theme.Secondary
        frame.Parent = scroll
        
        local corner = Theme.CornerRadius:Clone()
        corner.Parent = frame
        
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(0, 120, 1, 0)
        label.Position = UDim2.new(0, iconId and 35 or 10, 0, 0)
        label.Text = text
        label.TextColor3 = Theme.Text
        label.TextSize = 14
        label.Font = Theme.Font
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.BackgroundTransparency = 1
        label.Parent = frame
        
        if iconId then
            local icon = CreateIcon(iconId, frame)
            icon.Position = UDim2.new(0, 10, 0.5, -9)
        end
        
        local box = Instance.new("TextBox")
        box.Size = UDim2.new(1, -140, 0, 26)
        box.Position = UDim2.new(0, 130, 0.5, -13)
        box.BackgroundColor3 = Theme.Background
        box.Text = ""
        box.PlaceholderText = placeholder
        box.PlaceholderColor3 = Theme.SubText
        box.TextColor3 = Theme.Text
        box.TextSize = 13
        box.Font = Theme.Font
        box.ClearTextOnFocus = false
        box.Parent = frame
        
        local bCorner = Instance.new("UICorner")
        bCorner.CornerRadius = UDim.new(0, 6)
        bCorner.Parent = box
        
        box.FocusLost:Connect(function() callback(box.Text) end)
        return { Get = function() return box.Text end, Set = function(v) box.Text = v end }
    end
    
    function tab:AddSlider(text, min, max, default, callback, iconId)
        local frame = Instance.new("Frame")
        frame.Size = UDim2.new(1, 0, 0, 55)
        frame.BackgroundColor3 = Theme.Secondary
        frame.Parent = scroll
        
        local corner = Theme.CornerRadius:Clone()
        corner.Parent = frame
        
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, -20, 0, 30)
        label.Position = UDim2.new(0, iconId and 35 or 10, 0, 5)
        label.Text = text
        label.TextColor3 = Theme.Text
        label.TextSize = 14
        label.Font = Theme.Font
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.BackgroundTransparency = 1
        label.Parent = frame
        
        if iconId then
            local icon = CreateIcon(iconId, frame)
            icon.Position = UDim2.new(0, 10, 0, 11)
        end
        
        local valLabel = Instance.new("TextLabel")
        valLabel.Size = UDim2.new(0, 50, 0, 30)
        valLabel.Position = UDim2.new(1, -60, 0, 5)
        valLabel.Text = tostring(default)
        valLabel.TextColor3 = Theme.Accent
        valLabel.TextSize = 14
        valLabel.Font = Theme.FontBold
        valLabel.TextXAlignment = Enum.TextXAlignment.Right
        valLabel.BackgroundTransparency = 1
        valLabel.Parent = frame
        
        local bar = Instance.new("Frame")
        bar.Size = UDim2.new(1, -20, 0, 6)
        bar.Position = UDim2.new(0, 10, 0, 40)
        bar.BackgroundColor3 = Theme.Border
        bar.Parent = frame
        
        local bCorner = Instance.new("UICorner")
        bCorner.CornerRadius = UDim.new(1, 0)
        bCorner.Parent = bar
        
        local fill = Instance.new("Frame")
        fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
        fill.BackgroundColor3 = Theme.Accent
        fill.Parent = bar
        
        local fCorner = Instance.new("UICorner")
        fCorner.CornerRadius = UDim.new(1, 0)
        fCorner.Parent = fill
        
        local dragging = false
        local function Update(input)
            local pos = math.clamp((input.Position.X - bar.AbsolutePosition.X) / bar.AbsoluteSize.X, 0, 1)
            local val = math.floor(min + (max - min) * pos)
            valLabel.Text = tostring(val)
            Tween(fill, {Size = UDim2.new(pos, 0, 1, 0)}, 0.1)
            callback(val)
        end
        
        bar.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                dragging = true
                Update(input)
            end
        end)
        
        UserInputService.InputChanged:Connect(function(input)
            if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
                Update(input)
            end
        end)
        
        UserInputService.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                dragging = false
            end
        end)
    end
    
    function tab:AddLabel(text, iconId)
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, 0, 0, 25)
        label.Text = text
        label.TextColor3 = Theme.SubText
        label.TextSize = 13
        label.Font = Theme.Font
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.BackgroundTransparency = 1
        label.Parent = scroll
        
        if iconId then
            label.Position = UDim2.new(0, 25, 0, 0)
            local icon = CreateIcon(iconId, label)
            icon.Position = UDim2.new(0, -25, 0.5, -9)
            icon.ImageColor3 = Theme.SubText
        end
        return label
    end

    function tab:Notify(title, desc, type, duration)
        Notifications:New(title, desc, type, duration)
    end

    return tab
end

function UILibrary:Notify(title, desc, type, duration)
    Notifications:New(title, desc, type, duration)
end

return UILibrary
