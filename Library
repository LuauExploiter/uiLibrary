-- UI Library v1.0
local UI = {}
UI.__index = UI

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")

local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

function UI:Create(title)
    local self = setmetatable({}, UI)
    self.Tabs = {}
    self.Elements = {}
    self.Minimized = false

    -- ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "UIHub"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = PlayerGui
    self.ScreenGui = screenGui

    -- Main Frame
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 400, 0, 300)
    frame.Position = UDim2.new(0, 100, 0, 100)
    frame.BackgroundColor3 = Color3.fromRGB(30,30,35)
    frame.BorderSizePixel = 0
    frame.Parent = screenGui
    self.Frame = frame

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0,15)
    corner.Parent = frame

    -- Title Bar
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, -40, 0, 30)
    titleLabel.Position = UDim2.new(0, 10, 0, 5)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = title or "UI Hub"
    titleLabel.TextColor3 = Color3.fromRGB(255,255,255)
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 18
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = frame

    -- Close button
    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0, 25, 0, 25)
    closeBtn.Position = UDim2.new(1, -30, 0, 5)
    closeBtn.BackgroundColor3 = Color3.fromRGB(180,50,50)
    closeBtn.Text = "X"
    closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 18
    closeBtn.Parent = frame
    closeBtn.MouseButton1Click:Connect(function()
        screenGui:Destroy()
    end)

    -- Minimize button
    local minBtn = Instance.new("TextButton")
    minBtn.Size = UDim2.new(0, 25, 0, 25)
    minBtn.Position = UDim2.new(1, -60, 0, 5)
    minBtn.BackgroundColor3 = Color3.fromRGB(200,200,50)
    minBtn.Text = "_"
    minBtn.TextColor3 = Color3.fromRGB(0,0,0)
    minBtn.Font = Enum.Font.GothamBold
    minBtn.TextSize = 18
    minBtn.Parent = frame
    minBtn.MouseButton1Click:Connect(function()
        self.Minimized = not self.Minimized
        for _, elem in pairs(self.Elements) do
            elem.Visible = not self.Minimized
        end
    end)

    -- Dragging
    local dragging = false
    local dragStart, startPos
    titleLabel.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

    return self
end

function UI:Tab(name)
    local tabFrame = Instance.new("Frame")
    tabFrame.Size = UDim2.new(1, -20, 1, -50)
    tabFrame.Position = UDim2.new(0, 10, 0, 40)
    tabFrame.BackgroundTransparency = 1
    tabFrame.Visible = true
    tabFrame.Parent = self.Frame

    local tabButton = Instance.new("TextButton")
    tabButton.Size = UDim2.new(0, 80, 0, 25)
    tabButton.Position = UDim2.new(0, #self.Tabs*85 + 10, 0, 5)
    tabButton.Text = name
    tabButton.Font = Enum.Font.GothamBold
    tabButton.TextSize = 14
    tabButton.TextColor3 = Color3.fromRGB(255,255,255)
    tabButton.BackgroundColor3 = Color3.fromRGB(50,50,60)
    tabButton.Parent = self.Frame

    createCorner(tabButton,5)

    tabButton.MouseButton1Click:Connect(function()
        for _, t in pairs(self.Tabs) do
            t.Frame.Visible = false
        end
        tabFrame.Visible = true
    end)

    local tabObj = {Frame = tabFrame}
    function tabObj:Button(text, callback)
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1, -20, 0, 25)
        btn.Position = UDim2.new(0,10,0,#self.Frame:GetChildren()*30)
        btn.BackgroundColor3 = Color3.fromRGB(80,80,100)
        btn.Text = text
        btn.TextColor3 = Color3.fromRGB(255,255,255)
        btn.Font = Enum.Font.Gotham
        btn.TextSize = 14
        btn.Parent = tabFrame
        btn.MouseButton1Click:Connect(callback)
        createCorner(btn,5)
    end

    function tabObj:Toggle(text, default, callback)
        local frame = Instance.new("Frame")
        frame.Size = UDim2.new(1,-20,0,25)
        frame.Position = UDim2.new(0,10,0,#tabFrame:GetChildren()*30)
        frame.BackgroundTransparency = 1
        frame.Parent = tabFrame

        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1,-30,1,0)
        label.Position = UDim2.new(0,0,0,0)
        label.Text = text
        label.Font = Enum.Font.Gotham
        label.TextSize = 14
        label.TextColor3 = Color3.fromRGB(255,255,255)
        label.BackgroundTransparency = 1
        label.Parent = frame

        local toggle = Instance.new("TextButton")
        toggle.Size = UDim2.new(0,20,0,20)
        toggle.Position = UDim2.new(1,-25,0,2)
        toggle.BackgroundColor3 = default and Color3.fromRGB(0,200,0) or Color3.fromRGB(200,0,0)
        toggle.Text = ""
        toggle.Parent = frame
        createCorner(toggle,5)

        local state = default
        toggle.MouseButton1Click:Connect(function()
            state = not state
            toggle.BackgroundColor3 = state and Color3.fromRGB(0,200,0) or Color3.fromRGB(200,0,0)
            callback(state)
        end)
    end

    -- Sliders, Textboxes, Dropdowns, MultiSelects can be added similarly following this pattern

    table.insert(self.Tabs, tabObj)
    return tabObj
end

function createCorner(inst, radius)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0,radius or 8)
    corner.Parent = inst
end

return UI
