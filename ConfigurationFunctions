local HttpService=game:GetService("HttpService")
local FILE_NAME="hkopvp.json"
local Config={}

function Config.Save(t)
    pcall(function()
        writefile(FILE_NAME,HttpService:JSONEncode(t))
    end)
end

function Config.Load()
    if not isfile(FILE_NAME)then return nil end
    local s,r=pcall(function()
        return HttpService:JSONDecode(readfile(FILE_NAME))
    end)
    if s and type(r)=="table"then
        return r
    else
        pcall(delfile,FILE_NAME)
        return nil
    end
end

function Config.AutoLoad(d)
    local l=Config.Load()
    if not l then return d end
    for k,v in pairs(d)do
        if l[k]~=nil and typeof(l[k])==typeof(v)then
            d[k]=l[k]
        end
    end
    return d
end

return Config
